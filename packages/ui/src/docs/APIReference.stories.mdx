import { Meta, Canvas, Story, ArgTypes } from '@storybook/blocks';
import { 
  Button, 
  IconButton, 
  ModelSelector, 
  ContextTag, 
  Toggle, 
  RangeSlider,
  SegmentedControl,
  MessageActions 
} from '../index';

<Meta title="Documentation/API Reference" />

# API Reference

Complete reference for all ChatUI components with interactive examples and prop documentation.

## ğŸ”˜ Button

The primary button component with multiple variants and sizes.

<Canvas>
  <Story name="Button API">
    <div className="p-4 space-y-4">
      <div className="flex gap-2">
        <Button variant="default">Default</Button>
        <Button variant="destructive">Destructive</Button>
        <Button variant="outline">Outline</Button>
        <Button variant="secondary">Secondary</Button>
        <Button variant="ghost">Ghost</Button>
        <Button variant="link">Link</Button>
      </div>
      <div className="flex gap-2 items-center">
        <Button size="sm">Small</Button>
        <Button size="default">Default</Button>
        <Button size="lg">Large</Button>
        <Button size="icon">ğŸ¯</Button>
      </div>
      <div className="flex gap-2">
        <Button disabled>Disabled</Button>
        <Button loading>Loading</Button>
      </div>
    </div>
  </Story>
</Canvas>

<ArgTypes of={Button} />

### Usage Examples

```tsx
// Basic usage
<Button onClick={() => console.log('clicked')}>
  Click me
</Button>

// With variants
<Button variant="destructive" size="lg">
  Delete
</Button>

// Loading state
<Button loading disabled>
  Processing...
</Button>
```

## ğŸ¯ IconButton

Compact button for displaying icons with consistent sizing and interaction states.

<Canvas>
  <Story name="IconButton API">
    {() => {
      const [liked, setLiked] = React.useState(false);
      const [bookmarked, setBookmarked] = React.useState(false);
      
      return (
        <div className="p-4 space-y-4">
          <div className="flex gap-2">
            <IconButton icon={<span>ğŸ“‹</span>} variant="ghost" title="Copy" />
            <IconButton icon={<span>ğŸ”—</span>} variant="outline" title="Link" />
            <IconButton icon={<span>âš™ï¸</span>} variant="solid" title="Settings" />
          </div>
          
          <div className="flex gap-2">
            <IconButton icon={<span>â¤ï¸</span>} size="sm" title="Small" />
            <IconButton icon={<span>â¤ï¸</span>} size="md" title="Medium" />
            <IconButton icon={<span>â¤ï¸</span>} size="lg" title="Large" />
          </div>
          
          <div className="flex gap-2">
            <IconButton 
              icon={<span>â¤ï¸</span>} 
              active={liked}
              activeColor="var(--foundation-accent-red)"
              onClick={() => setLiked(!liked)}
              title="Like"
            />
            <IconButton 
              icon={<span>ğŸ”–</span>} 
              active={bookmarked}
              activeColor="var(--foundation-accent-blue)"
              onClick={() => setBookmarked(!bookmarked)}
              title="Bookmark"
            />
          </div>
        </div>
      );
    }}
  </Story>
</Canvas>

<ArgTypes of={IconButton} />

## ğŸ¤– ModelSelector

Dropdown component for selecting AI models with support for legacy models and descriptions.

<Canvas>
  <Story name="ModelSelector API">
    {() => {
      const [selectedModel, setSelectedModel] = React.useState("GPT-4o");
      
      const models = [
        { name: "GPT-4o", shortName: "4o", description: "Fast and efficient" },
        { name: "GPT-4", shortName: "4", description: "Most capable" },
        { name: "GPT-3.5 Turbo", shortName: "3.5", description: "Quick responses" },
      ];
      
      const legacyModels = [
        { name: "GPT-3", shortName: "3", description: "Legacy model", isLegacy: true },
      ];
      
      return (
        <div className="p-4 space-y-4">
          <ModelSelector
            value={selectedModel}
            models={models}
            legacyModels={legacyModels}
            onChange={setSelectedModel}
            label="ChatGPT"
          />
          
          <div className="text-white/60 text-sm">
            Selected: {selectedModel}
          </div>
        </div>
      );
    }}
  </Story>
</Canvas>

<ArgTypes of={ModelSelector} />

## ğŸ·ï¸ ContextTag

Removable tag component for displaying active context or filters.

<Canvas>
  <Story name="ContextTag API">
    <div className="p-4 space-y-4">
      <div className="flex flex-wrap gap-2">
        <ContextTag label="Green variant" variant="green" />
        <ContextTag label="Blue variant" variant="blue" />
        <ContextTag label="Orange variant" variant="orange" />
        <ContextTag label="Red variant" variant="red" />
        <ContextTag label="Default variant" variant="default" />
      </div>
      
      <div className="flex flex-wrap gap-2">
        <ContextTag 
          icon={<span>ğŸ“„</span>}
          label="With icon" 
          variant="green" 
          size="sm"
        />
        <ContextTag 
          icon={<span>ğŸ“</span>}
          label="With close button" 
          variant="blue" 
          onClose={() => console.log('Closed')}
        />
      </div>
    </div>
  </Story>
</Canvas>

<ArgTypes of={ContextTag} />

## ğŸ›ï¸ Toggle

Switch component for boolean values with consistent styling.

<Canvas>
  <Story name="Toggle API">
    {() => {
      const [enabled, setEnabled] = React.useState(false);
      const [disabled, setDisabled] = React.useState(true);
      
      return (
        <div className="p-4 space-y-4">
          <div className="flex items-center gap-4">
            <Toggle checked={enabled} onChange={setEnabled} />
            <span className="text-white/80">
              {enabled ? 'Enabled' : 'Disabled'}
            </span>
          </div>
          
          <div className="flex items-center gap-4">
            <Toggle checked={disabled} onChange={setDisabled} disabled />
            <span className="text-white/60">Disabled state</span>
          </div>
          
          <div className="flex items-center gap-4">
            <Toggle checked={true} size="sm" />
            <Toggle checked={true} size="md" />
            <Toggle checked={true} size="lg" />
          </div>
        </div>
      );
    }}
  </Story>
</Canvas>

<ArgTypes of={Toggle} />

## ğŸ“Š RangeSlider

Range input component with labels, custom styling, and value display.

<Canvas>
  <Story name="RangeSlider API">
    {() => {
      const [volume, setVolume] = React.useState(75);
      const [quality, setQuality] = React.useState(60);
      
      return (
        <div className="p-4 space-y-6 max-w-md">
          <RangeSlider
            label="Volume"
            value={volume}
            onChange={setVolume}
            min={0}
            max={100}
            suffix="%"
          />
          
          <RangeSlider
            label="Quality"
            value={quality}
            onChange={setQuality}
            min={20}
            max={100}
            suffix="k"
            showValue={true}
          />
          
          <RangeSlider
            value={50}
            min={0}
            max={100}
            disabled
            showValue={false}
          />
        </div>
      );
    }}
  </Story>
</Canvas>

<ArgTypes of={RangeSlider} />

## ğŸšï¸ SegmentedControl

Multi-option selector with segmented button appearance.

<Canvas>
  <Story name="SegmentedControl API">
    {() => {
      const [quality, setQuality] = React.useState("medium");
      const [size, setSize] = React.useState("md");
      
      return (
        <div className="p-4 space-y-6">
          <div>
            <label className="text-white/80 text-sm mb-2 block">Quality</label>
            <SegmentedControl
              value={quality}
              options={[
                { value: "low", label: "Low" },
                { value: "medium", label: "Medium" },
                { value: "high", label: "High" },
              ]}
              onChange={setQuality}
            />
          </div>
          
          <div>
            <label className="text-white/80 text-sm mb-2 block">Size</label>
            <SegmentedControl
              value={size}
              options={[
                { value: "sm", label: "S" },
                { value: "md", label: "M" },
                { value: "lg", label: "L" },
                { value: "xl", label: "XL" },
              ]}
              onChange={setSize}
            />
          </div>
        </div>
      );
    }}
  </Story>
</Canvas>

<ArgTypes of={SegmentedControl} />

## ğŸ’¬ MessageActions

Action buttons for chat messages with configurable actions.

<Canvas>
  <Story name="MessageActions API">
    <div className="p-4">
      <div className="bg-[var(--foundation-bg-dark-2)] p-4 rounded-lg max-w-md">
        <p className="text-white mb-3">
          This is a sample message that demonstrates the MessageActions component.
        </p>
        <MessageActions
          messageId="example"
          actions={["copy", "thumbsUp", "thumbsDown", "share", "regenerate", "more"]}
          onCopy={() => console.log('Copied')}
          onThumbsUp={() => console.log('Thumbs up')}
          onThumbsDown={() => console.log('Thumbs down')}
          onShare={() => console.log('Shared')}
          onRegenerate={() => console.log('Regenerated')}
          onMore={() => console.log('More options')}
        />
      </div>
    </div>
  </Story>
</Canvas>

<ArgTypes of={MessageActions} />

## ğŸ¨ Styling Props

Most components accept these common styling props:

### className
All components accept a `className` prop for custom CSS classes:

```tsx
<Button className="bg-purple-500 hover:bg-purple-600">
  Custom Button
</Button>
```

### CSS Custom Properties
Components use CSS custom properties that can be overridden:

```tsx
<Button style={{ '--button-radius': '12px' }}>
  Custom Radius
</Button>
```

## ğŸ”§ Advanced Usage

### Ref Forwarding
All components forward refs to their underlying DOM elements:

```tsx
const buttonRef = useRef<HTMLButtonElement>(null);

<Button ref={buttonRef}>
  Focusable Button
</Button>
```

### Event Handling
Components provide consistent event handling patterns:

```tsx
<Button 
  onClick={(event) => {
    event.preventDefault();
    // Handle click
  }}
>
  Handle Click
</Button>
```

### Accessibility
All components include proper ARIA attributes and keyboard support. Use the A11y addon in Storybook to verify accessibility compliance.